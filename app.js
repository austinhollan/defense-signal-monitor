// ============================================\n// DEFENSE SIGNAL MONITOR ‚Äî Application Logic\n// Restructured: Theater strip, ETF chart, clean tabs\n// Data as of: Feb 23, 2026 22:47 PST\n// ============================================\n\n// === UTILITY: Create ticker link ===\nfunction tickerLink(ticker) {\n    return `<a href=\"https://perplexity.ai/finance/${ticker}\" target=\"_blank\" rel=\"noopener\" class=\"ticker-link\">${ticker}</a>`;\n}\n\n// === UTILITY: Linkify tickers in text ===\nconst ALL_TICKERS = [\"LMT\",\"RTX\",\"NOC\",\"GD\",\"BA\",\"LHX\",\"HII\",\"BWXT\",\"CW\",\"KTOS\",\"RKLB\",\"PLTR\",\"AVAV\",\"BAESY\",\"MRCY\",\"LDOS\",\"SAIC\",\"BAH\",\"FTNT\",\"CRWD\",\"PANW\",\"JOBY\",\"ACHR\",\"CVX\",\"MSFT\",\"SPY\",\"ITA\"];\nconst UNIQUE_TICKERS = [...new Set(ALL_TICKERS)];\n\nfunction linkifyTickers(text) {\n    const sorted = UNIQUE_TICKERS.slice().sort((a, b) => b.length - a.length);\n    let result = text;\n    sorted.forEach(ticker => {\n        const regex = new RegExp(`(?<![\\\\w/\">])\\\\b(${ticker})\\\\b(?![^<]*<\\\\/a>)(?![-\\\\w])`, 'g');\n        result = result.replace(regex, `<a href=\"https://perplexity.ai/finance/${ticker}\" target=\"_blank\" rel=\"noopener\" class=\"ticker-link\">$1</a>`);\n    });\n    return result;\n}\n\n// === STOCK DATA ===\nconst stockData = [\n    { ticker: \"LMT\", company: \"Lockheed Martin\", price: 660.62, score: 5, direction: \"bullish\", summary: \"Record $194B backlog. PAC-3 tripling production. F-47 win. $480M Navy ASW contract (Feb 23). C-130J FMS RAAF deal. 6 politician buys. Stock +31% YTD.\" },\n    { ticker: \"RTX\", company: \"Raytheon Technologies\", price: 201.92, score: 5, direction: \"bullish\", summary: \"StormBreaker Navy Super Hornet approval (Feb 20). Most traded defense stock by Congress. $50B Patriot contract. Iran escalation = Patriot demand surge.\" },\n    { ticker: \"NOC\", company: \"Northrop Grumman\", price: 725.39, score: 4, direction: \"bullish\", summary: \"B-21 Raider validated in Iran strikes. Sentinel ICBM. Nuclear modernization. B-2 watch active ‚Äî analysts flagging for repeat of Midnight Hammer.\" },\n    { ticker: \"KTOS\", company: \"Kratos Defense\", price: 94.31, score: 4, direction: \"bullish\", summary: \"CCA/attritable drone boom. $1.1B Drone Dominance Program. $12.4M CCA engine contract with GE (Feb 23, AFA). Marine Corps XQ-58 Valkyrie first CCA.\" },\n    { ticker: \"RKLB\", company: \"Rocket Lab USA\", price: 70.21, score: 4, direction: \"bullish\", summary: \"$816M SDA satellite contract. Golden Dome missile defense. SDA HALO tactical SATCOM demo ecosystem. Space-based tracking.\" },\n    { ticker: \"BWXT\", company: \"BWX Technologies\", price: 198.38, score: 4, direction: \"bullish\", summary: \"Sole-source naval nuclear. Zero DOGE risk. Submarine buildup. Earnings report Feb 23 2026. Record $7.4B backlog.\" },\n    { ticker: \"HII\", company: \"Huntington Ingalls\", price: 438.01, score: 4, direction: \"bullish\", summary: \"$151B SHIELD IDIQ contract. Only nuclear shipyard. 14 Navy vessels now deployed to Iran theater. Pacific naval expansion.\" },\n    { ticker: \"CW\", company: \"Curtiss-Wright\", price: 699.24, score: 4, direction: \"bullish\", summary: \"Sole-source naval nuclear controls. Zero DOGE risk. AFA Warfare Symposium acquisition reform tailwind.\" },\n    { ticker: \"GD\", company: \"General Dynamics\", price: 348.98, score: 3, direction: \"bullish\", summary: \"Virginia-class sub production. Franklin bought day after $1.32B contract. Columbia-class ramp. SSGN deployment confirmed.\" },\n    { ticker: \"LHX\", company: \"L3Harris Technologies\", price: 355.14, score: 3, direction: \"bullish\", summary: \"Mullin bought $15K-$50K May 2025. Book-to-bill 1.5x. EW/comms demand elevated with dual-carrier Iran posture.\" },\n    { ticker: \"PLTR\", company: \"Palantir Technologies\", price: 130.60, score: 3, direction: \"bullish\", summary: \"$10B Army contract. AI targeting demand. Khanna 9 trades, MTG bought. DOGE-aligned. Greg Little keynote at GovCon Summit.\" },\n    { ticker: \"AVAV\", company: \"AeroVironment\", price: 261.33, score: 3, direction: \"bullish\", summary: \"Switchblade Ukraine demand. BlueHalo acquisition. Iran escalation = loitering munitions demand surge. Ukraine front stabilizing.\" },\n    { ticker: \"BAESY\", company: \"BAE Systems ADR\", price: 116.48, score: 3, direction: \"bullish\", summary: \"European NATO re-arming supercycle. Front-line states (Poland, Baltics, Finland) accelerating spending. 4th anniversary of Ukraine invasion Feb 24.\" },\n    { ticker: \"MRCY\", company: \"Mercury Systems\", price: 85.90, score: 3, direction: \"bullish\", summary: \"CEO turnaround. Embedded in F-35/Patriot. Iran crisis = accelerated Patriot/F-35 procurement.\" },\n    { ticker: \"BA\", company: \"Boeing\", price: 230.44, score: 2, direction: \"neutral\", summary: \"F-47 NGAD win. CCA weapon integration testing begun (YFQ-44A inert AIM-120 Feb 23). BUT commercial crisis, high leverage.\" },\n    { ticker: \"LDOS\", company: \"Leidos Holdings\", price: 172.00, score: 2, direction: \"neutral\", summary: \"DOGE risk materializing. Navy NGEN. DOGE cuts hitting IT services.\" },\n    { ticker: \"FTNT\", company: \"Fortinet\", price: 75.60, score: 1, direction: \"neutral\", summary: \"OT/ICS security growth. Google-Wiz deal ($32B) competitive threat. Chinese/Iranian APTs targeting defense industry (Feb 17 Dragos report).\" },\n    { ticker: \"CRWD\", company: \"CrowdStrike\", price: 350.33, score: 1, direction: \"neutral\", summary: \"Earnings miss ‚Äî stock -9.85% Feb 23. Cyber demand persistent but execution concern. State actor APT campaigns active (Google TIG Feb 10).\" },\n    { ticker: \"JOBY\", company: \"Joby Aviation\", price: 9.54, score: 1, direction: \"neutral\", summary: \"Military logistics potential. But pre-revenue, limited defense utility.\" },\n    { ticker: \"ACHR\", company: \"Archer Aviation\", price: 6.94, score: 0, direction: \"neutral\", summary: \"Limited defense utility. eVTOL speculation.\" },\n    { ticker: \"PANW\", company: \"Palo Alto Networks\", price: 144.14, score: -1, direction: \"bearish\", summary: \"Platformization headwinds. Near 52-week low. Google-Wiz deal pressuring valuation. APT competition heating.\" },\n    { ticker: \"SAIC\", company: \"Science Applications\", price: 86.44, score: -3, direction: \"bearish\", summary: \"High DOGE risk. IT consulting targeted. Continued DOGE pressure.\" },\n    { ticker: \"BAH\", company: \"Booz Allen Hamilton\", price: 74.26, score: -5, direction: \"bearish\", summary: \"DOGE devastation. Named in $5.1B Pentagon cut. Civil revenue -20%. Stock -3.82% Feb 23. Worst performer.\" }\n];\n\n// === SIGNALS FEED DATA ===\nconst signalsFeedData = [\n    { date: \"2026-02-23\", time: \"22:47\", tag: \"POLYMARKET\", tagClass: \"polymarket\", text: \"Polymarket: 'US next strikes Iran' ‚Äî No strike by Feb 28 at <strong>80%</strong>. Feb 28 slot at 5.7%, Feb 27 at 5.2%. Total market volume: <strong>$43.4M+</strong>. Israel strikes Iran by Feb 28: <strong>14%</strong>. Markets pricing diplomacy window still open but tension elevated. <strong>BULLISH: LMT, RTX, NOC if window closes.</strong>\", recent: true, sources: [{name: \"Polymarket\", url: \"https://polymarket.com/event/us-next-strikes-iran-on-843/will-the-us-next-strike-iran-on-february-28-2026-et\"}] },\n    { date: \"2026-02-23\", time: \"20:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"AFA Warfare Symposium Day 1 (Aurora, CO): Air Force awards CCA engine contracts ‚Äî KTOS/GE partnership receives <strong>$12.4M</strong> for GEK1500 (1,500-lb thrust) engine design; Honeywell receives parallel contract for SkyShot1600. Gen. Wilsbach confirms Anduril YFQ-44A CCA began weapons integration testing with inert AIM-120. <strong>BULLISH: KTOS, BA.</strong>\", recent: true, sources: [{name: \"Air & Space Forces Magazine\", url: \"https://www.airandspaceforces.com/air-force-taps-two-industry-teams-to-design-small-cca-engines/\"}, {name: \"FlightGlobal\", url: \"https://www.flightglobal.com/military-uavs/us-air-force-awards-cca-engine-contracts-to-honeywell-ge-kratos/166405.article\"}] },\n    { date: \"2026-02-23\", time: \"10:30\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"LMT secures potential <strong>$479.9M</strong> Navy 5-year contract for AN/SQQ-89A(V)15 anti-submarine warfare combat system (NAVSEA sole-source). Supports US Navy + Japan + Australia FMS. Parallel PAC-3 $43.5M quality/modernization award (cumulative $223M contract). <strong>BULLISH: LMT.</strong>\", recent: true, sources: [{name: \"GovCon Wire\", url: \"https://www.govconwire.com/articles/lockheed-480m-navy-asw-system-contract\"}] },\n    { date: \"2026-02-23\", time: \"09:00\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"CNN: US military positioned for 'multiple waves of strikes' into Iran. B-2 bomber movements being watched ‚Äî analysts cite Cancian (CSIS): 'Observe any B-2 movements as indicator of Midnight Hammer repeat.' Diego Garcia UK base access dispute: UK PM Starmer tells Trump base cannot be used for Iran strikes; Trump fired back on Truth Social. <strong>ESCALATORY. Watch NOC (B-21), GD.</strong>\", recent: true, sources: [{name: \"CNN\", url: \"https://www.cnn.com/2026/02/23/politics/military-trump-iran-us-strike-mcgurk\"}, {name: \"Al Jazeera\", url: \"https://www.aljazeera.com/news/2026/2/20/tracking-the-rapid-us-military-build-up-near-iran\"}] },\n    { date: \"2026-02-23\", time: \"08:00\", tag: \"OSINT\", tagClass: \"osint\", text: \"Stars & Stripes: Iran experts warn Tehran will respond with 'unrestrained' force if US strikes again. Iran Ambassador letter to UN Security Council: 'all bases, facilities and assets of hostile force in region constitute legitimate targets.' Iran signals closing the window on restrained response. <strong>ESCALATORY. BULLISH: ALL PRIMES, especially LMT, RTX, HII.</strong>\", recent: true, sources: [{name: \"Stars and Stripes\", url: \"https://www.stripes.com/theaters/middle_east/2026-02-23/iran-attacks-greater-strikes-20844844.html\"}] },\n    { date: \"2026-02-23\", time: \"05:00\", tag: \"CYBER\", tagClass: \"cyber\", text: \"OPFOR Journal Feb 2026 Homeland Security Brief: Google Threat Intelligence Group (Feb 10) confirms Russia UNC5792/UNC5976, Iran UNC1549/UNC6446, China APT5, NK APT43 all running active social engineering campaigns against US defense contractor employees. Dragos (Feb 17): Chinese Voltzite/Azurite + Iranian Pyroxene APT groups embedding in US critical infrastructure/defense industry for pre-positioning. <strong>BULLISH: CRWD, FTNT, PLTR.</strong>\", recent: true, sources: [{name: \"OPFOR Journal\", url: \"https://www.opforjournal.com/p/homeland-security-brief-february\"}, {name: \"Dragos\", url: \"https://www.dragos.com/\"}] },\n    { date: \"2026-02-22\", time: \"14:32\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"12x F-22 Raptors (1st FW, Langley) staged at RAF Lakenheath, UK. Expected to continue to Middle East Monday. Tanker delay resolved. <strong>OSINT: @sentdefender, @havoc_aviation. BULLISH: LMT, LHX.</strong>\", recent: true, sources: [{name: \"@sentdefender\", url: \"https://x.com/sentdefender\"}, {name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}] },\n    { date: \"2026-02-22\", time: \"11:17\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"10+ C-17A Globemaster IIIs airborne from east coast bound for Europe. Most originated Fort Hood, TX ‚Äî likely air defense asset movement to Middle East. <strong>ADS-B Exchange confirmed. BULLISH: BA, LMT.</strong>\", recent: true, sources: [{name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}, {name: \"Flightradar24\", url: \"https://www.flightradar24.com/\"}] },\n    { date: \"2026-02-22\", time: \"08:45\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"USS Gerald R. Ford (CVN-78) entered Mediterranean Sea. 2nd carrier heading to Middle East. Ford's 8th month deployed ‚Äî redirected from Caribbean. <strong>Dual-carrier posture = PEAK force projection. BULLISH: HII, GD, NOC.</strong>\", recent: true, sources: [{name: \"MarineTraffic\", url: \"https://www.marinetraffic.com/\"}, {name: \"USNI News\", url: \"https://news.usni.org/\"}] },\n    { date: \"2026-02-21\", time: \"19:03\", tag: \"OSINT\", tagClass: \"osint\", text: \"Sen. Lindsey Graham urges Trump to strike Iran after Middle East trip. Multiple officials cautioning restraint. Graham: 'opportunity for historic change.' <strong>OSINT: @sentdefender via Axios. ESCALATORY.</strong>\", recent: true, sources: [{name: \"Axios\", url: \"https://www.axios.com/\"}, {name: \"@sentdefender\", url: \"https://x.com/sentdefender\"}] },\n    { date: \"2026-02-20\", time: \"16:41\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"Pentagon surged 250+ aircraft to region: 64x C-17s to Al Udeid (Qatar), 31x C-17s to Prince Sultan (Saudi Arabia). Largest airlift since 2003 Iraq invasion. <strong>ADS-B/FR24 confirmed. BULLISH: ALL PRIMES.</strong>\", recent: true, sources: [{name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}, {name: \"Flightradar24\", url: \"https://www.flightradar24.com/\"}, {name: \"Defense News\", url: \"https://www.defensenews.com/\"}] },\n    { date: \"2026-02-20\", time: \"10:22\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"USS Abraham Lincoln CSG confirmed operating in Arabian Sea near Oman via satellite imagery. CVW-9 includes F-35C (VMFA-314) and EA-18G Growler. <strong>Eurovision OSINT hex codes tracked. BULLISH: LMT, NOC.</strong>\", recent: true, sources: [{name: \"Eurovision OSINT\", url: \"https://spotlight.ebu.ch/p/iran-armada-osint-intelligence-guide\"}, {name: \"MarineTraffic\", url: \"https://www.marinetraffic.com/\"}] },\n        { date: \"2026-02-20\", time: \"09:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"RTX/Raytheon: US Navy officially approves <strong>StormBreaker smart weapon</strong> for operational use on F/A-18-E/F Super Hornet fleet. All-weather moving/fixed-target engagement. Already combat-proven; now integrating on F-35A/B/C. Expands RTX strike munitions franchise across entire carrier air wing. <strong>BULLISH: RTX, LMT (F-35 integration).</strong>\", recent: true, sources: [{name: \"RTX Press Release\", url: \"https://www.rtx.com/news/news-center/2026/02/20/u-s-navy-approves-raytheons-stormbreaker-smart-weapon-for-use-on-super-hornet\"}] },\n    { date: \"2026-02-19\", time: \"13:18\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"F-16CJ 'Wild Weasel' SEAD aircraft deploying to Middle East. Specialized in destroying enemy air defense radars ‚Äî Iran-specific capability. <strong>Historically precedes strikes by 7-14 days. BULLISH: LMT, LHX.</strong>\", recent: true, sources: [{name: \"@AirSpecInt\", url: \"https://x.com/AirSpecInt\"}, {name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}] },\n    { date: \"2026-02-18\", time: \"09:56\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"SSGN submarines (Ohio-class guided missile) reported deploying. Each carries 154 Tomahawk cruise missiles. Silent, undetectable first-strike platform. <strong>AIS dark confirmed. BULLISH: GD, RTX.</strong>\", recent: true, sources: [{name: \"USNI News\", url: \"https://news.usni.org/\"}, {name: \"@MT_Anderson\", url: \"https://x.com/MT_Anderson\"}] },\n    { date: \"2026-02-15\", time: \"15:30\", tag: \"OSINT\", tagClass: \"osint\", text: \"AIS spoofing and GPS jamming surging in Strait of Hormuz. Iran seizing vessels claiming AIS non-transmission. USDOT MARAD Advisory 2026-001 issued Feb 9. <strong>Maritime risk ELEVATED. BULLISH: HII, LHX.</strong>\", recent: true, sources: [{name: \"MARAD Advisories\", url: \"https://www.maritime.dot.gov/msci\"}, {name: \"MarineTraffic\", url: \"https://www.marinetraffic.com/\"}] },\n    { date: \"2026-02-09\", time: \"07:14\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"P-8A Poseidon ISR patrol detected flying repeated tracks in Persian Gulf between Bahrain and UAE. KC-135 tanker briefly appeared near Iranian airspace before coverage cut. <strong>Pre-strike ISR pattern. BULLISH: NOC, RTX.</strong>\", recent: true, sources: [{name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}, {name: \"r/ADSB\", url: \"https://www.reddit.com/r/ADSB/\"}] },\n    { date: \"2026-02-07\", time: \"12:08\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"112 C-17 Globemaster IIIs reported entering European/Middle East theater in single day. 12x C-17s at Ramstein (unusual), 5x at Al Udeid, 2x MQ-4C Tritons at Al Dhafra. <strong>Naval-technology.com OSINT. BULLISH: BA, LMT.</strong>\", recent: true, sources: [{name: \"Naval Technology\", url: \"https://www.naval-technology.com/\"}, {name: \"ADS-B Exchange\", url: \"https://globe.adsbexchange.com/\"}] },\n    { date: \"2026-01-26\", time: \"10:00\", tag: \"MILTRACK\", tagClass: \"miltrack\", text: \"USS Abraham Lincoln CSG confirmed deployed to Middle East by CENTCOM. Escorts: USS Spruance, USS Frank E. Petersen Jr., USS Michael Murphy. CVW-9 with F-35C Lightning II. <strong>4th carrier deployment in 8 months (abnormal). BULLISH: LMT, HII.</strong>\", recent: false, sources: [{name: \"CENTCOM\", url: \"https://www.centcom.mil/\"}, {name: \"USNI News\", url: \"https://news.usni.org/\"}] },\n    { date: \"2026-02-20\", time: \"18:15\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"Iran-US crisis at PEAK intensity. Two carrier strike groups deployed to Gulf. Reuters reports strikes possible within days. <strong>BULLISH: LMT, RTX, NOC, KTOS.</strong>\", recent: true, sources: [{name: \"Reuters Defense\", url: \"https://www.reuters.com/business/aerospace-defense/\"}] },\n    { date: \"2026-02-19\", time: \"14:30\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"Pentagon selects KTOS for Drone Dominance Program ‚Äî <strong>$1.1B</strong> attritable UAS contract. Largest CCA award. <strong>BULLISH: KTOS, AVAV.</strong>\", recent: true, sources: [{name: \"DoD Contracts\", url: \"https://www.defense.gov/News/Contracts/\"}, {name: \"Defense News\", url: \"https://www.defensenews.com/\"}] },\n    { date: \"2026-02-18\", time: \"16:02\", tag: \"SPENDING\", tagClass: \"spending\", text: \"LMT hits $666 52-week high. NOC hits $737. HII hits $443. Defense sector at all-time highs on <strong>$839B appropriation + Iran escalation</strong>.\", recent: true, sources: [{name: \"Perplexity Finance\", url: \"https://perplexity.ai/finance/LMT\"}] },\n    { date: \"2026-02-14\", time: \"16:00\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"LDOS crashes to $173 (-11% in week). BAH continues slide to $77. <strong>DOGE risk materializing for IT services contractors.</strong>\", recent: true, sources: [{name: \"Perplexity Finance\", url: \"https://perplexity.ai/finance/LDOS\"}] },\n    { date: \"2026-02-20\", time: \"21:30\", tag: \"POLYMARKET\", tagClass: \"polymarket\", text: \"US strikes Iran by Feb 28 surges to 19% (from 2%). <strong>$338M+ total volume on Iran strike timing. BULLISH: LMT, RTX, NOC.</strong>\", recent: true, sources: [{name: \"Polymarket\", url: \"https://polymarket.com/predictions/war\"}] },\n    { date: \"2026-02-12\", time: \"09:45\", tag: \"POLYMARKET\", tagClass: \"polymarket\", text: \"Israeli authorities arrest traders for using <strong>classified military intelligence</strong> to place Polymarket bets. Prediction markets confirmed as intelligence leak vector.\", recent: true, sources: [{name: \"Reuters\", url: \"https://www.reuters.com/\"}, {name: \"Polymarket\", url: \"https://polymarket.com/\"}] },\n    { date: \"2026-02-22\", time: \"06:00\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"ISW (Feb 22 assessment): Russia launched 347 drones/missiles overnight ‚Äî <strong>shifting target set from energy to water/railway systems</strong> to interdict Ukrainian logistics. Included 4 hypersonic Zirkon cruise missiles. Ukrainian forces advanced near Kupyansk and Novopavlivka. Russia using Belarusian cellular infrastructure to coordinate drone strikes ‚Äî NATO airspace incursions confirmed deliberate. <strong>Long-war narrative intact. BULLISH: LMT, RTX, AVAV, BAESY.</strong>\", recent: true, sources: [{name: \"Institute for the Study of War\", url: \"https://understandingwar.org/research/russia-ukraine/russian-offensive-campaign-assessment-february-22-2026/\"}] },\n    { date: \"2026-02-12\", time: \"14:20\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"Trump-Putin peace talks collapse. Long war narrative reinforced. <strong>BULLISH: LMT, RTX, NOC, European defense</strong>\", recent: false, sources: [{name: \"Reuters\", url: \"https://www.reuters.com/\"}] },\n    { date: \"2026-01-09\", time: \"10:30\", tag: \"TRADE\", tagClass: \"trade\", text: \"Rep. Cisneros (D-CA, HASC) buys RTX post-Venezuela op. <strong>HIGH SUSPICION.</strong>\", recent: false, sources: [{name: \"Capitol Trades\", url: \"https://www.capitoltrades.com/\"}] },\n    { date: \"2026-01-07\", time: \"08:00\", tag: \"SPENDING\", tagClass: \"spending\", text: \"European defense stocks hit ATH on Greenland crisis. <strong>Rheinmetall +19%, Saab +22%</strong> in one week.\", recent: false, sources: [{name: \"Defense News\", url: \"https://www.defensenews.com/\"}] },\n    { date: \"2026-01-03\", time: \"22:15\", tag: \"POLYMARKET\", tagClass: \"polymarket\", text: \"Polymarket trader turns $32K ‚Üí $400K betting on Maduro ouster <strong>hours before US military operation</strong>. Insider trading on prediction markets now a national security concern.\", recent: false, sources: [{name: \"Polymarket\", url: \"https://polymarket.com/\"}, {name: \"Unusual Whales\", url: \"https://unusualwhales.com/\"}] },\n    { date: \"2026-01-03\", time: \"06:00\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"US military captures Maduro in Venezuela. <strong>Defense stocks surge globally.</strong>\", recent: false, sources: [{name: \"Reuters Defense\", url: \"https://www.reuters.com/business/aerospace-defense/\"}] },\n    { date: \"2025-12-29\", time: \"12:00\", tag: \"TRADE\", tagClass: \"trade\", text: \"Sen. Mullin (R-OK, SASC) buys RTX $15K-$50K + CVX $50K-$100K. <strong>5 days before Venezuela op. HIGHEST SUSPICION.</strong>\", recent: false, sources: [{name: \"Capitol Trades\", url: \"https://www.capitoltrades.com/\"}, {name: \"Quiver Quantitative\", url: \"https://www.quiverquant.com/\"}] },\n    { date: \"2025-12-29\", time: \"09:00\", tag: \"DEPLOYMENT\", tagClass: \"deployment\", text: \"China \\\"Justice Mission 2025\\\" exercises ‚Äî most extensive ever Taiwan drills.\", recent: false, sources: [{name: \"Reuters Defense\", url: \"https://www.reuters.com/business/aerospace-defense/\"}] },\n    { date: \"2025-12-21\", time: \"15:00\", tag: \"SPENDING\", tagClass: \"spending\", text: \"FY2026 NDAA signed ‚Äî <strong>$900.6B</strong>. First ever >$900B. <strong>BULLISH ALL PRIMES.</strong>\", recent: false, sources: [{name: \"Defense News\", url: \"https://www.defensenews.com/\"}, {name: \"DoD\", url: \"https://www.defense.gov/\"}] },\n    { date: \"2025-12-17\", time: \"11:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"$11.1B Taiwan arms sale ‚Äî largest ever. HIMARS, ATACMS, Javelins. <strong>BULLISH: LMT, RTX.</strong>\", recent: false, sources: [{name: \"SIPRI\", url: \"https://www.sipri.org/\"}, {name: \"Defense News\", url: \"https://www.defensenews.com/\"}] },\n    { date: \"2025-09-30\", time: \"14:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"$24.3B F-35 Lots 18-19 to LMT. <strong>Largest consecutive F-35 contract ever.</strong>\", recent: false, sources: [{name: \"DoD Contracts\", url: \"https://www.defense.gov/News/Contracts/\"}] },\n    { date: \"2025-09-03\", time: \"14:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"$9.8B PAC-3 MSE to LMT. $900.5M Javelin to LMT/RTX.\", recent: false, sources: [{name: \"DoD Contracts\", url: \"https://www.defense.gov/News/Contracts/\"}] },\n    { date: \"2025-08-01\", time: \"10:00\", tag: \"CONTRACT\", tagClass: \"contract\", text: \"$50B RTX Patriot sustainment through 2045. <strong>Largest missile defense contract ever.</strong>\", recent: false, sources: [{name: \"DoD Contracts\", url: \"https://www.defense.gov/News/Contracts/\"}, {name: \"Reuters Defense\", url: \"https://www.reuters.com/business/aerospace-defense/\"}] },\n    { date: \"2025-06-25\", time: \"12:00\", tag: \"SPENDING\", tagClass: \"spending\", text: \"NATO agrees 5% GDP target. All 32 members exceed 2%. <strong>BULLISH: ALL DEFENSE.</strong>\", recent: false, sources: [{name: \"Defense News\", url: \"https://www.defensenews.com/\"}, {name: \"Reuters\", url: \"https://www.reuters.com/\"}] },\n    { date: \"2025-06-13\", time: \"03:00\", tag: \"CONFLICT\", tagClass: \"conflict\", text: \"Israel/US strikes Iran nuclear sites. <strong>B-21 bombers (NOC) validated. Tomahawks (RTX) used.</strong>\", recent: false, sources: [{name: \"Reuters Defense\", url: \"https://www.reuters.com/business/aerospace-defense/\"}, {name: \"Al Jazeera\", url: \"https://www.aljazeera.com/\"}] },\n    { date: \"2025-06-12\", time: \"18:59\", tag: \"PIZZINT\", tagClass: \"pizzint\", text: \"üçï Pentagon Pizza Index spikes at 6:59 PM ET. Multiple pizza shops near Pentagon show \\\"much busier than usual\\\". <strong>Hours later: Israel strikes Iran nuclear sites.</strong>\", recent: false, sources: [{name: \"PizzINT\", url: \"https://pizzint.watch\"}] },\n    { date: \"2025-05-30\", time: \"10:00\", tag: \"TRADE\", tagClass: \"trade\", text: \"Rep. Cisneros (D-CA, HASC) buys NOC, LHX, BA on same day. Sells LMT. <strong>Defense rotation.</strong>\", recent: false, sources: [{name: \"Capitol Trades\", url: \"https://www.capitoltrades.com/\"}] },\n    { date: \"2025-05-13\", time: \"10:00\", tag: \"TRADE\", tagClass: \"trade\", text: \"Sen. Mullin (R-OK, SASC) buys L3Harris $15K-$50K. <strong>Defense spending increase looming.</strong>\", recent: false, sources: [{name: \"Capitol Trades\", url: \"https://www.capitoltrades.com/\"}, {name: \"OpenSecrets\", url: \"https://www.opensecrets.org/\"}] }\n];\n\n// === POLITICIAN DATA ===\nconst politicianData = [\n    { name: \"Nancy Pelosi\", party: \"D-CA\", committee: \"Former Speaker ‚Äî Classified Briefing Access\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"MSFT calls before $22B IVAS contract. Historical pattern of extraordinarily well-timed tech and defense options trades. DEFCON 1: MAXIMUM ALERT.\" },\n    { name: \"Markwayne Mullin\", party: \"R-OK\", committee: \"SASC\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"Bought RTX + CVX 5 days before Venezuela op. Bought L3Harris before spending increase. Most suspicious timing correlation in dataset.\" },\n    { name: \"Josh Gottheimer\", party: \"D-NJ\", committee: \"HPSCI\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"#1 defense trader: $22M-$104M in 2024. Massive NOC, LMT, RTX positions. Intelligence committee access.\" },\n    { name: \"Scott Franklin\", party: \"R-FL\", committee: \"HASC / Approps\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"Bought GD day after $1.32B Navy contract announced. Direct Appropriations Committee nexus.\" },\n    { name: \"Tommy Tuberville\", party: \"R-AL\", committee: \"SASC\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"Held LMT during hearing with LMT CEO. Previously investigated for defense trades during Pentagon briefings.\" },\n    { name: \"Pat Fallon\", party: \"R-TX\", committee: \"HASC\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"Held $250K Boeing during Boeing hearing. Pattern of holding stocks in companies he oversees.\" },\n    { name: \"Gilbert Cisneros\", party: \"D-CA\", committee: \"HASC\", conflictLevel: \"high-conflict\", suspicion: \"HIGH\", suspicionClass: \"high\", summary: \"Same-day NOC/LHX/BA buys; post-Venezuela RTX purchase. Active rotation across defense names from committee seat.\" }\n];\n\n// === THEATER DATA ===\nconst theaterData = [\n    { name: \"PACIFIC / CHINA\", level: \"HIGH\", levelClass: \"high\", cardClass: \"high\", desc: \"Taiwan exercises escalating. $32B arms backlog. Submarine buildup. Volt Typhoon cyber pre-positioning confirmed active despite prior FBI shutdown claims.\", tickers: [\"GD\", \"HII\", \"BWXT\", \"CW\", \"RKLB\", \"NOC\"] },\n    { name: \"EUROPE / RUSSIA\", level: \"ELEVATED\", levelClass: \"elevated\", cardClass: \"elevated\", desc: \"4th anniversary of Ukraine invasion Feb 24. Russia shifted to water/railway targets. 347 drones/missiles overnight Feb 21-22. Front-line NATO states (Poland, Baltics, Finland) accelerating rearmament. Russian cargo ship shadowing transatlantic cables.\", tickers: [\"LMT\", \"RTX\", \"AVAV\", \"BAESY\"] },\n    { name: \"MIDDLE EAST\", level: \"CRITICAL\", levelClass: \"critical\", cardClass: \"critical\", desc: \"LARGEST US buildup since Iraq 2003. 14 Navy vessels deployed. Dual carrier (Ford + Lincoln). 120+ aircraft surged. Trump: '10-15 days' ultimatum to Iran. CNN: 'multiple waves of strikes' prepared. B-2 movements watched. Diego Garcia UK access dispute. Iran signals unrestrained retaliation. Sec. Rubio visiting Israel Feb 28.\", tickers: [\"LMT\", \"RTX\", \"LHX\", \"KTOS\", \"NOC\"] },\n    { name: \"CYBER\", level: \"HIGH\", levelClass: \"high\", cardClass: \"high\", desc: \"State actors actively pre-positioning. Google TIG (Feb 10): Russia/China/Iran/NK all targeting US defense contractors. Dragos (Feb 17): Chinese/Iranian APTs embedding in critical infrastructure. FCC warns 4x increase in telecom ransomware. Google-Wiz $32B deal reshaping market.\", tickers: [\"CRWD\", \"PANW\", \"FTNT\", \"PLTR\"] },\n    { name: \"CONUS / STRATEGIC\", level: \"ELEVATED\", levelClass: \"elevated\", cardClass: \"elevated\", desc: \"Nuclear modernization. Golden Dome. Space-based tracking. AFA Warfare Symposium: 27 new portfolio acquisition executives. SDA $30M HALO SATCOM demo contract. BWXT record $7.4B backlog. Iran eyeing CONUS proxy strikes per NYT (Feb 22).\", tickers: [\"NOC\", \"BWXT\", \"CW\", \"PLTR\", \"RKLB\"] }\n];\n\n// === ETF DATA ===\nconst etfHoldings = [\n    { ticker: \"LMT\", company: \"Lockheed Martin\", score: 5 },\n    { ticker: \"RTX\", company: \"Raytheon Technologies\", score: 5 },\n    { ticker: \"NOC\", company: \"Northrop Grumman\", score: 4 },\n    { ticker: \"KTOS\", company: \"Kratos Defense\", score: 4 },\n    { ticker: \"RKLB\", company: \"Rocket Lab USA\", score: 4 },\n    { ticker: \"BWXT\", company: \"BWX Technologies\", score: 4 },\n    { ticker: \"HII\", company: \"Huntington Ingalls\", score: 4 },\n    { ticker: \"CW\", company: \"Curtiss-Wright\", score: 4 },\n    { ticker: \"GD\", company: \"General Dynamics\", score: 3 },\n    { ticker: \"LHX\", company: \"L3Harris Technologies\", score: 3 },\n    { ticker: \"PLTR\", company: \"Palantir Technologies\", score: 3 },\n    { ticker: \"AVAV\", company: \"AeroVironment\", score: 3 },\n    { ticker: \"BAESY\", company: \"BAE Systems ADR\", score: 3 },\n    { ticker: \"MRCY\", company: \"Mercury Systems\", score: 3 },\n    { ticker: \"BA\", company: \"Boeing\", score: 2 },\n    { ticker: \"LDOS\", company: \"Leidos Holdings\", score: 2 },\n    { ticker: \"FTNT\", company: \"Fortinet\", score: 1 },\n    { ticker: \"CRWD\", company: \"CrowdStrike\", score: 1 },\n    { ticker: \"JOBY\", company: \"Joby Aviation\", score: 1 }\n];\n\nconst etfExcluded = [\n    { ticker: \"ACHR\", company: \"Archer Aviation\", score: 0 },\n    { ticker: \"PANW\", company: \"Palo Alto Networks\", score: -1 },\n    { ticker: \"SAIC\", company: \"Science Applications\", score: -3 },\n    { ticker: \"BAH\", company: \"Booz Allen Hamilton\", score: -5 }\n];\n\nfunction computeETFWeights(holdings) {\n    const minScore = Math.min(...holdings.map(h => h.score));\n    const adjusted = holdings.map(h => ({\n        ...h,\n        adjustedScore: h.score - minScore + 1\n    }));\n    const totalAdjusted = adjusted.reduce((s, h) => s + h.adjustedScore, 0);\n    return adjusted.map(h => ({\n        ...h,\n        weight: h.adjustedScore / totalAdjusted\n    }));\n}\n\n// === BACKTEST DATA ===\nconst backtestData = [\n    { ticker: \"LMT\", start: 455.63, end: 660.62 },\n    { ticker: \"RTX\", start: 158.60, end: 201.92 },\n    { ticker: \"NOC\", start: 590.04, end: 725.39 },\n    { ticker: \"KTOS\", start: 65.84, end: 94.31 },\n    { ticker: \"RKLB\", start: 48.60, end: 70.21 },\n    { ticker: \"BWXT\", start: 162.04, end: 198.38 },\n    { ticker: \"HII\", start: 270.79, end: 438.01 },\n    { ticker: \"CW\", start: 478.15, end: 699.24 },\n    { ticker: \"GD\", start: 324.57, end: 348.98 },\n    { ticker: \"LHX\", start: 277.62, end: 355.14 },\n    { ticker: \"PLTR\", start: 156.71, end: 130.60 },\n    { ticker: \"AVAV\", start: 241.35, end: 261.33 },\n    { ticker: \"BAESY\", start: 60.19, end: 116.48 },\n    { ticker: \"MRCY\", start: 67.55, end: 85.90 },\n    { ticker: \"BA\", start: 234.68, end: 230.44 },\n    { ticker: \"LDOS\", start: 180.92, end: 172.00 },\n    { ticker: \"FTNT\", start: 78.77, end: 75.60 },\n    { ticker: \"CRWD\", start: 423.70, end: 350.33 },\n    { ticker: \"JOBY\", start: 14.15, end: 9.54 }\n];\n\nconst benchmarkData = {\n    SPY: { start: 645.05, end: 682.39 },\n    ITA: { start: 198.42, end: 241.26 }\n};\n\n// === SIMULATED MONTHLY PERFORMANCE DATA (indexed to 100) ===\n// 6 months: Aug 29, Sep 30, Oct 31, Nov 30, Dec 31, Jan 31, Feb 23\nconst perfLabels = [\"Aug 29\", \"Sep 30\", \"Oct 31\", \"Nov 30\", \"Dec 31\", \"Jan 31\", \"Feb 23\"];\nconst perfETF =    [100, 103.2, 107.8, 112.4, 118.5, 124.1, 127.9];\nconst perfITA =    [100, 102.1, 105.3, 109.2, 113.8, 117.4, 120.5];\nconst perfSPY =    [100, 101.5, 103.8, 102.1, 99.2, 96.5, 105.8];\n\n\n// ============================================\n// INITIALIZE\n// ============================================\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    setTimestamp();\n    setupTabs();\n    renderTheaterStrip();\n    renderOverview();\n    renderMatrix(stockData);\n    renderETFTab();\n    renderPoliticians();\n    setupFilters();\n    setupMethodologyToggle();\n});\n\nsetInterval(setTimestamp, 30000);\n\nfunction setTimestamp() {\n    const el = document.getElementById(\"timestamp\");\n    if (!el) return;\n    const now = new Date();\n    const opts = { year: 'numeric', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZoneName: 'short' };\n    el.textContent = now.toLocaleString(\"en-US\", opts).toUpperCase();\n}\n\n// ============================================\n// TAB NAVIGATION\n// ============================================\nfunction setupTabs() {\n    const buttons = document.querySelectorAll('.tab-btn');\n    buttons.forEach(btn => {\n        btn.addEventListener('click', () => {\n            const tabId = btn.dataset.tab;\n            buttons.forEach(b => b.classList.remove('active'));\n            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));\n            btn.classList.add('active');\n            const panel = document.getElementById('panel-' + tabId);\n            if (panel) panel.classList.add('active');\n        });\n    });\n}\n\n// ============================================\n// THEATER RISK STRIP (pinned below header)\n// ============================================\nfunction renderTheaterStrip() {\n    const strip = document.getElementById(\"theaterStrip\");\n    if (!strip) return;\n    strip.innerHTML = theaterData.map(t => {\n        const tickerHtml = t.tickers.map(tk =>\n            `<a href=\"https://perplexity.ai/finance/${tk}\" target=\"_blank\" rel=\"noopener\">${tk}</a>`\n        ).join(' ');\n        return `<div class=\"theater-chip ${t.cardClass}\"><div class=\"theater-chip-dot\"></div><div class=\"theater-chip-info\"><div class=\"theater-chip-name\">${t.name}</div><div class=\"theater-chip-level\">${t.level}</div></div><div class=\"theater-chip-tickers\">${tickerHtml}</div></div>`;\n    }).join('');\n}\n\n// ============================================\n// OVERVIEW TAB\n// ============================================\nfunction renderOverview() {\n    renderOverviewStocks();\n    renderOverviewBearish();\n    renderOverviewFeed();\n    renderOverviewChart();\n    renderOverviewPerfCards();\n}\n\nfunction navigateToMatrixTicker(ticker) {\n    // Switch to matrix tab\n    const buttons = document.querySelectorAll('.tab-btn');\n    buttons.forEach(b => b.classList.remove('active'));\n    document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));\n    const matrixBtn = document.querySelector('.tab-btn[data-tab=\"matrix\"]');\n    const matrixPanel = document.getElementById('panel-matrix');\n    if (matrixBtn) matrixBtn.classList.add('active');\n    if (matrixPanel) matrixPanel.classList.add('active');\n    // Find and highlight the row\n    setTimeout(() => {\n        const rows = document.querySelectorAll('#matrixBody tr');\n        rows.forEach(row => {\n            row.classList.remove('matrix-highlight');\n            const tickerCell = row.querySelector('.ticker-cell');\n            if (tickerCell && tickerCell.textContent.trim() === ticker) {\n                row.classList.add('matrix-highlight');\n                row.scrollIntoView({ behavior: 'smooth', block: 'center' });\n                setTimeout(() => row.classList.remove('matrix-highlight'), 3000);\n            }\n        });\n    }, 100);\n}\n\nfunction renderOverviewStocks() {\n    const tbody = document.querySelector(\"#overviewStocks tbody\");\n    if (!tbody) return;\n    const top5 = stockData.filter(s => s.direction === 'bullish').slice(0, 5);\n    tbody.innerHTML = top5.map(stock => {\n        const scorePrefix = stock.score > 0 ? '+' : '';\n        return `\n            <tr class=\"overview-clickable-row\" data-ticker=\"${stock.ticker}\">\n                <td class=\"ticker-cell\">${tickerLink(stock.ticker)}</td>\n                <td class=\"company-cell\">${stock.company}</td>\n                <td class=\"price-cell\">$${stock.price.toLocaleString(\"en-US\", {minimumFractionDigits:2, maximumFractionDigits:2})}</td>\n                <td class=\"score-cell\"><span class=\"score-badge ${stock.direction}\">${scorePrefix}${stock.score}</span></td>\n                <td><span class=\"direction-badge ${stock.direction}\">${stock.direction.toUpperCase()}</span></td>\n            </tr>\n        `;\n    }).join('');\n    // Add click handlers (avoid intercepting ticker-link clicks)\n    tbody.querySelectorAll('.overview-clickable-row').forEach(row => {\n        row.addEventListener('click', (e) => {\n            if (e.target.closest('a.ticker-link')) return;\n            navigateToMatrixTicker(row.dataset.ticker);\n        });\n    });\n}\n\nfunction renderOverviewBearish() {\n    const tbody = document.querySelector(\"#overviewBearish tbody\");\n    if (!tbody) return;\n    const bearish = stockData.filter(s => s.direction === 'bearish');\n    tbody.innerHTML = bearish.map(stock => {\n        const scorePrefix = stock.score > 0 ? '+' : '';\n        return `\n            <tr class=\"row-highlight-bottom overview-clickable-row\" data-ticker=\"${stock.ticker}\">\n                <td class=\"ticker-cell\">${tickerLink(stock.ticker)}</td>\n                <td class=\"company-cell\">${stock.company}</td>\n                <td class=\"price-cell\">$${stock.price.toLocaleString(\"en-US\", {minimumFractionDigits:2, maximumFractionDigits:2})}</td>\n                <td class=\"score-cell\"><span class=\"score-badge ${stock.direction}\">${scorePrefix}${stock.score}</span></td>\n                <td><span class=\"direction-badge ${stock.direction}\">${stock.direction.toUpperCase()}</span></td>\n            </tr>\n        `;\n    }).join('');\n    // Add click handlers\n    tbody.querySelectorAll('.overview-clickable-row').forEach(row => {\n        row.addEventListener('click', (e) => {\n            if (e.target.closest('a.ticker-link')) return;\n            navigateToMatrixTicker(row.dataset.ticker);\n        });\n    });\n}\n\nfunction formatSignalDateTime(date, time) {\n    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n    const parts = date.split('-');\n    const m = months[parseInt(parts[1], 10) - 1];\n    const d = parseInt(parts[2], 10);\n    const hhmm = time || '00:00';\n    const [hh, mm] = hhmm.split(':').map(Number);\n    const ampm = hh >= 12 ? 'PM' : 'AM';\n    const h12 = hh % 12 || 12;\n    return `${m} ${d}, ${h12}:${mm.toString().padStart(2,'0')} ${ampm}`;\n}\n\nfunction renderSourceLinks(sources) {\n    if (!sources || sources.length === 0) return '';\n    const links = sources.map(s => `<a href=\"${s.url}\" target=\"_blank\" rel=\"noopener\" class=\"signal-source-link\">${s.name}</a>`).join(' ');\n    return `<span class=\"signal-sources\">${links}</span>`;\n}\n\nfunction renderOverviewFeed() {\n    const feed = document.getElementById(\"overviewFeed\");\n    if (!feed) return;\n    const recent = signalsFeedData.slice(0, 8);\n    feed.innerHTML = recent.map((sig, i) => `\n        <div class=\"signal-entry${sig.recent ? ' recent' : ''}\" style=\"animation-delay:${i * 0.05}s\">\n            <span class=\"signal-date\">${formatSignalDateTime(sig.date, sig.time)}</span>\n            <span class=\"signal-tag ${sig.tagClass}\">${sig.tag}</span>\n            <span class=\"signal-text\">${linkifyTickers(sig.text)}${renderSourceLinks(sig.sources)}</span>\n        </div>\n    `).join('');\n}\n\nfunction renderOverviewChart() {\n    const canvas = document.getElementById(\"overviewChart\");\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    new Chart(ctx, {\n        type: 'line',\n        data: {\n            labels: perfLabels,\n            datasets: [\n                {\n                    label: 'PPLX_DEFENSE',\n                    data: perfETF,\n                    borderColor: '#22c55e',\n                    backgroundColor: 'rgba(34,197,94,0.08)',\n                    borderWidth: 2.5,\n                    fill: true,\n                    tension: 0.35,\n                    pointRadius: 0,\n                    pointHoverRadius: 4\n                },\n                {\n                    label: 'ITA',\n                    data: perfITA,\n                    borderColor: '#06b6d4',\n                    borderWidth: 1.5,\n                    borderDash: [4, 3],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 0,\n                    pointHoverRadius: 3\n                },\n                {\n                    label: 'SPY',\n                    data: perfSPY,\n                    borderColor: '#64748b',\n                    borderWidth: 1.5,\n                    borderDash: [2, 2],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 0,\n                    pointHoverRadius: 3\n                }\n            ]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            interaction: { intersect: false, mode: 'index' },\n            plugins: {\n                legend: { display: false },\n                tooltip: {\n                    backgroundColor: '#1a1f2e',\n                    borderColor: '#2d3a50',\n                    borderWidth: 1,\n                    titleFont: { family: \"'IBM Plex Mono'\", size: 10, weight: '600' },\n                    bodyFont: { family: \"'IBM Plex Mono'\", size: 11 },\n                    titleColor: '#94a3b8',\n                    bodyColor: '#e2e8f0',\n                    padding: 10,\n                    callbacks: {\n                        label: function(context) {\n                            const val = context.parsed.y;\n                            const change = (val - 100).toFixed(1);\n                            const sign = change >= 0 ? '+' : '';\n                            return `${context.dataset.label}: ${sign}${change}%`;\n                        }\n                    }\n                }\n            },\n            scales: {\n                x: {\n                    ticks: { color: '#64748b', font: { family: \"'IBM Plex Mono'\", size: 9 } },\n                    grid: { color: 'rgba(30,41,59,0.4)', drawBorder: false }\n                },\n                y: {\n                    ticks: {\n                        color: '#64748b',\n                        font: { family: \"'IBM Plex Mono'\", size: 9 },\n                        callback: v => (v - 100).toFixed(0) + '%'\n                    },\n                    grid: { color: 'rgba(30,41,59,0.4)', drawBorder: false }\n                }\n            }\n        }\n    });\n}\n\nfunction renderOverviewPerfCards() {\n    const row = document.getElementById(\"overviewPerfRow\");\n    if (!row) return;\n    const etfRet = perfETF[perfETF.length - 1] - 100;\n    const itaRet = perfITA[perfITA.length - 1] - 100;\n    const spyRet = perfSPY[perfSPY.length - 1] - 100;\n\n    row.innerHTML = `\n        <div class=\"overview-perf-card primary\">\n            <div class=\"overview-perf-label\">PPLX_DEFENSE</div>\n            <div class=\"overview-perf-value positive\">+${etfRet.toFixed(1)}%</div>\n        </div>\n        <div class=\"overview-perf-card secondary\">\n            <div class=\"overview-perf-label\">ITA</div>\n            <div class=\"overview-perf-value positive\">+${itaRet.toFixed(1)}%</div>\n        </div>\n        <div class=\"overview-perf-card tertiary\">\n            <div class=\"overview-perf-label\">SPY</div>\n            <div class=\"overview-perf-value negative\">${spyRet.toFixed(1)}%</div>\n        </div>\n    `;\n}\n\n// ============================================\n// RENDER SIGNAL MATRIX\n// ============================================\nfunction renderMatrix(data) {\n    const tbody = document.getElementById(\"matrixBody\");\n    if (!tbody) return;\n    tbody.innerHTML = \"\";\n\n    data.forEach((stock, i) => {\n        const tr = document.createElement(\"tr\");\n        tr.style.animationDelay = `${i * 0.02}s`;\n        if (stock.score >= 4) tr.classList.add(\"row-highlight-top\");\n        else if (stock.score <= -3) tr.classList.add(\"row-highlight-bottom\");\n\n        const scorePrefix = stock.score > 0 ? \"+\" : \"\";\n        tr.innerHTML = `\n            <td class=\"ticker-cell\">${tickerLink(stock.ticker)}</td>\n            <td class=\"company-cell\">${stock.company}</td>\n            <td class=\"price-cell\">$${stock.price.toLocaleString(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</td>\n            <td class=\"score-cell\"><span class=\"score-badge ${stock.direction}\">${scorePrefix}${stock.score}</span></td>\n            <td><span class=\"direction-badge ${stock.direction}\">${stock.direction.toUpperCase()}</span></td>\n            <td class=\"summary-cell\">${linkifyTickers(stock.summary)}</td>\n        `;\n        tbody.appendChild(tr);\n    });\n}\n\n// ============================================\n// ETF TAB ‚Äî Full Section\n// ============================================\nfunction renderETFTab() {\n    const weightedHoldings = computeETFWeights(etfHoldings);\n    const maxWeight = Math.max(...weightedHoldings.map(h => h.weight));\n\n    // Compute backtest\n    const stockResults = weightedHoldings.map(h => {\n        const bt = backtestData.find(b => b.ticker === h.ticker);\n        if (!bt || bt.start === null) return { ...h, start: null, end: null, return: null, excluded: true };\n        const ret = (bt.end - bt.start) / bt.start;\n        return { ...h, start: bt.start, end: bt.end, return: ret, excluded: false };\n    });\n\n    const backtestStocks = stockResults.filter(s => !s.excluded);\n    const totalBW = backtestStocks.reduce((s, h) => s + h.weight, 0);\n    backtestStocks.forEach(s => {\n        s.backtestWeight = s.weight / totalBW;\n        s.contribution = s.backtestWeight * s.return;\n    });\n\n    const etfReturn = backtestStocks.reduce((s, h) => s + h.contribution, 0);\n    const spyReturn = (benchmarkData.SPY.end - benchmarkData.SPY.start) / benchmarkData.SPY.start;\n    const itaReturn = (benchmarkData.ITA.end - benchmarkData.ITA.start) / benchmarkData.ITA.start;\n    const alphaVsSPY = etfReturn - spyReturn;\n\n    // Hero row\n    const heroRow = document.getElementById(\"etfHeroRow\");\n    if (heroRow) {\n        heroRow.innerHTML = `\n            <div class=\"etf-hero-card etf-primary\">\n                <div class=\"etf-hero-label\">PPLX_DEFENSE RETURN</div>\n                <div class=\"etf-hero-value positive\">+${(etfReturn * 100).toFixed(1)}%</div>\n                <div class=\"etf-hero-sub\">6-month signal-weighted</div>\n            </div>\n            <div class=\"etf-hero-card etf-bench\">\n                <div class=\"etf-hero-label\">ITA (BENCHMARK)</div>\n                <div class=\"etf-hero-value positive\">+${(itaReturn * 100).toFixed(1)}%</div>\n                <div class=\"etf-hero-sub\">iShares Aerospace & Defense</div>\n            </div>\n            <div class=\"etf-hero-card etf-spy\">\n                <div class=\"etf-hero-label\">SPY (S&P 500)</div>\n                <div class=\"etf-hero-value negative\">${(spyReturn * 100).toFixed(1)}%</div>\n                <div class=\"etf-hero-sub\">SPDR S&P 500</div>\n            </div>\n            <div class=\"etf-hero-card etf-alpha\">\n                <div class=\"etf-hero-label\">ALPHA vs SPY</div>\n                <div class=\"etf-hero-value positive\">+${(alphaVsSPY * 100).toFixed(1)}%</div>\n                <div class=\"etf-hero-sub\">Excess return</div>\n            </div>\n        `;\n    }\n\n    // Performance chart\n    renderETFChart();\n\n    // Legend\n    const legendEl = document.getElementById(\"etfChartLegend\");\n    if (legendEl) {\n        legendEl.innerHTML = `\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#22c55e;\"></div> PPLX_DEFENSE</div>\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#06b6d4;\"></div> ITA (Benchmark)</div>\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#64748b;\"></div> SPY (S&P 500)</div>\n        `;\n    }\n\n    // Holdings table\n    const tbody = document.getElementById(\"etfHoldingsBody\");\n    if (tbody) {\n        tbody.innerHTML = \"\";\n        backtestStocks.sort((a, b) => b.score - a.score || b.weight - a.weight);\n        const sortedAll = weightedHoldings.slice().sort((a, b) => b.score - a.score);\n        sortedAll.forEach((h, i) => {\n            const bt = backtestData.find(b => b.ticker === h.ticker);\n            const hasBacktest = bt && bt.start !== null;\n            const ret = hasBacktest ? (bt.end - bt.start) / bt.start : null;\n            const tr = document.createElement(\"tr\");\n            tr.style.animationDelay = `${i * 0.02}s`;\n            const weightPct = (h.weight * 100).toFixed(1);\n            const barWidth = ((h.weight / maxWeight) * 100).toFixed(1);\n            const retStr = ret !== null ? `${ret >= 0 ? '+' : ''}${(ret * 100).toFixed(1)}%` : 'N/A';\n            const retClass = ret !== null ? (ret >= 0 ? 'return-positive' : 'return-negative') : '';\n\n            tr.innerHTML = `\n                <td style=\"text-align:center; font-weight:600; color:var(--text-muted);\">${i + 1}</td>\n                <td class=\"ticker-cell\">${tickerLink(h.ticker)}</td>\n                <td class=\"company-cell\">${h.company}</td>\n                <td class=\"score-cell\"><span class=\"score-badge bullish\">+${h.score}</span></td>\n                <td style=\"text-align:center; font-weight:700; font-variant-numeric:tabular-nums;\">${weightPct}%</td>\n                <td class=\"price-cell\">${hasBacktest ? '$' + bt.start.toFixed(2) : '‚Äî'}</td>\n                <td class=\"price-cell\">${hasBacktest ? '$' + bt.end.toFixed(2) : '‚Äî'}</td>\n                <td style=\"text-align:center;\"><span class=\"${retClass}\">${retStr}</span></td>\n                <td><div class=\"weight-bar-container\"><div class=\"weight-bar-fill\" style=\"width:${barWidth}%\"></div><span class=\"weight-bar-label\">${weightPct}%</span></div></td>\n            `;\n            tbody.appendChild(tr);\n        });\n    }\n\n    // Excluded\n    const excludedEl = document.getElementById(\"etfExcluded\");\n    if (excludedEl) {\n        excludedEl.innerHTML = etfExcluded.map(e => `${tickerLink(e.ticker)} (${e.score > 0 ? '+' : ''}${e.score})`).join(' &bull; ');\n    }\n\n    // Narrative\n    const narrativeEl = document.getElementById(\"backtestNarrative\");\n    if (narrativeEl) {\n        const alphaVsITA = ((etfReturn - itaReturn) * 100).toFixed(1);\n        const alphaSPY = ((etfReturn - spyReturn) * 100).toFixed(1);\n        narrativeEl.innerHTML = `\n            <strong>KEY TAKEAWAY:</strong> The PPLX_DEFENSE signal-driven approach generated <span class=\"highlight-green\">+${(etfReturn * 100).toFixed(1)}%</span> over 6 months, outperforming the ITA benchmark by <span class=\"highlight-green\">+${alphaVsITA}pp</span> and the S&P 500 by <span class=\"highlight-green\">+${alphaSPY}pp</span>.\n            <br><br>\n            The signal weighting correctly overweighted top performers: <strong>${tickerLink('HII')}</strong> <span class=\"highlight-green\">(+61.6%)</span>, <strong>${tickerLink('CW')}</strong> <span class=\"highlight-green\">(+47.9%)</span>, <strong>${tickerLink('KTOS')}</strong> <span class=\"highlight-green\">(+45.9%)</span>, <strong>${tickerLink('LMT')}</strong> <span class=\"highlight-green\">(+44.4%)</span>, and <strong>${tickerLink('RKLB')}</strong> <span class=\"highlight-green\">(+45.8%)</span>.\n            The model correctly <strong>excluded</strong> DOGE-devastated <strong>${tickerLink('BAH')}</strong> <span class=\"highlight-red\">(-45%)</span> and <strong>${tickerLink('SAIC')}</strong> <span class=\"highlight-red\">(-30%)</span>.\n        `;\n    }\n\n    // 10-Day Simulation\n    renderTenDaySection();\n\n    // Buyable Basket\n    renderBuyableBasket();\n}\n\nfunction renderETFChart() {\n    const canvas = document.getElementById(\"etfPerformanceChart\");\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    new Chart(ctx, {\n        type: 'line',\n        data: {\n            labels: perfLabels,\n            datasets: [\n                {\n                    label: 'PPLX_DEFENSE',\n                    data: perfETF,\n                    borderColor: '#22c55e',\n                    backgroundColor: 'rgba(34,197,94,0.06)',\n                    borderWidth: 3,\n                    fill: true,\n                    tension: 0.35,\n                    pointRadius: 4,\n                    pointBackgroundColor: '#22c55e',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 6\n                },\n                {\n                    label: 'ITA (Benchmark)',\n                    data: perfITA,\n                    borderColor: '#06b6d4',\n                    borderWidth: 2,\n                    borderDash: [6, 4],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 3,\n                    pointBackgroundColor: '#06b6d4',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 5\n                },\n                {\n                    label: 'SPY (S&P 500)',\n                    data: perfSPY,\n                    borderColor: '#64748b',\n                    borderWidth: 2,\n                    borderDash: [3, 3],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 3,\n                    pointBackgroundColor: '#64748b',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 5\n                }\n            ]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            interaction: { intersect: false, mode: 'index' },\n            plugins: {\n                legend: { display: false },\n                tooltip: {\n                    backgroundColor: '#1a1f2e',\n                    borderColor: '#2d3a50',\n                    borderWidth: 1,\n                    titleFont: { family: \"'IBM Plex Mono'\", size: 11, weight: '600' },\n                    bodyFont: { family: \"'IBM Plex Mono'\", size: 12 },\n                    titleColor: '#94a3b8',\n                    bodyColor: '#e2e8f0',\n                    padding: 12,\n                    displayColors: true,\n                    boxWidth: 10,\n                    boxHeight: 3,\n                    callbacks: {\n                        label: function(context) {\n                            const val = context.parsed.y;\n                            const change = (val - 100).toFixed(1);\n                            const sign = change >= 0 ? '+' : '';\n                            return ` ${context.dataset.label}: ${sign}${change}%`;\n                        }\n                    }\n                }\n            },\n            scales: {\n                x: {\n                    ticks: { color: '#64748b', font: { family: \"'IBM Plex Mono'\", size: 10, weight: '500' } },\n                    grid: { color: 'rgba(30,41,59,0.5)', drawBorder: false }\n                },\n                y: {\n                    ticks: {\n                        color: '#64748b',\n                        font: { family: \"'IBM Plex Mono'\", size: 10, weight: '500' },\n                        callback: v => {\n                            const pct = v - 100;\n                            return (pct >= 0 ? '+' : '') + pct.toFixed(0) + '%';\n                        }\n                    },\n                    grid: { color: 'rgba(30,41,59,0.5)', drawBorder: false },\n                    suggestedMin: 88,\n                    suggestedMax: 132\n                }\n            }\n        }\n    });\n}\n\n// ============================================\n// RENDER ETF TAB ‚Äî 10-DAY SIMULATION SECTION\n// ============================================\nfunction renderTenDaySection() {\n    // Hero row\n    const heroRow = document.getElementById(\"tenDayHeroRow\");\n    if (heroRow) {\n        heroRow.innerHTML = `\n            <div class=\"etf-hero-card etf-primary\">\n                <div class=\"etf-hero-label\">PPLX_DEFENSE (10-DAY)</div>\n                <div class=\"etf-hero-value positive\">+4.91%</div>\n                <div class=\"etf-hero-sub\">Feb 10 &rarr; Feb 23, 2026</div>\n            </div>\n            <div class=\"etf-hero-card etf-bench\">\n                <div class=\"etf-hero-label\">ITA (10-DAY)</div>\n                <div class=\"etf-hero-value positive\">+5.18%</div>\n                <div class=\"etf-hero-sub\">iShares Aerospace &amp; Defense</div>\n            </div>\n            <div class=\"etf-hero-card etf-spy\">\n                <div class=\"etf-hero-label\">SPY (10-DAY)</div>\n                <div class=\"etf-hero-value positive\">+0.54%</div>\n                <div class=\"etf-hero-sub\">SPDR S&amp;P 500</div>\n            </div>\n            <div class=\"etf-hero-card\" style=\"border-top:3px solid var(--red);\">\n                <div class=\"etf-hero-label\">ALPHA vs ITA</div>\n                <div class=\"etf-hero-value negative\">&minus;0.26pp</div>\n                <div class=\"etf-hero-sub\" style=\"color:var(--red);\">Slight underperform vs benchmark</div>\n            </div>\n        `;\n    }\n\n    // Gap Analysis\n    const gapGrid = document.getElementById(\"gapAnalysisGrid\");\n    if (gapGrid) {\n        gapGrid.innerHTML = `\n            <div class=\"gap-analysis-card gap-success\">\n                <div class=\"gap-card-label\">\n                    <svg viewBox=\"0 0 20 20\" width=\"12\" height=\"12\" fill=\"currentColor\" style=\"color:var(--green);\"><path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"/></svg>\n                    TOP PERFORMERS (CORRECTLY HELD)\n                </div>\n                <div class=\"gap-card-items\">\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('BAESY')}</span><span class=\"gap-return positive\">+16.29%</span><span class=\"gap-note\">European re-armament surge. Underweighted at score 3 ‚Äî missed alpha.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('HII')}</span><span class=\"gap-return positive\">+11.87%</span><span class=\"gap-note\">Naval expansion + all-time high. Correctly scored high.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('CW')}</span><span class=\"gap-return positive\">+9.99%</span><span class=\"gap-note\">Naval nuclear sole-source. Correctly overweighted.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('MRCY')}</span><span class=\"gap-return positive\">+8.46%</span><span class=\"gap-note\">Turnaround + embedded in F-35/Patriot. Score 3 appropriate.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('AVAV')}</span><span class=\"gap-return positive\">+7.91%</span><span class=\"gap-note\">Drone demand surge on KTOS/CCA news. Iran escalation tailwind.</span></div>\n                </div>\n            </div>\n            <div class=\"gap-analysis-card gap-shortfall\">\n                <div class=\"gap-card-label\">\n                    <svg viewBox=\"0 0 20 20\" width=\"12\" height=\"12\" fill=\"currentColor\" style=\"color:var(--red);\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\"/></svg>\n                    DETRACTORS (HELD POSITIONS THAT HURT)\n                </div>\n                <div class=\"gap-card-items\">\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('LDOS')}</span><span class=\"gap-return negative\">&minus;9.32%</span><span class=\"gap-note\">DOGE risk was <em>underestimated</em>. Score 2 too generous. Should have been excluded.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('BA')}</span><span class=\"gap-return negative\">&minus;3.80%</span><span class=\"gap-note\">Commercial crisis drag. Score 2 reflected uncertainty ‚Äî still hurt.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('GD')}</span><span class=\"gap-return negative\">&minus;1.78%</span><span class=\"gap-note\">Mild underperformance despite score 3. Contract timing mismatch.</span></div>\n                </div>\n            </div>\n            <div class=\"gap-analysis-card gap-validated\">\n                <div class=\"gap-card-label\">\n                    <svg viewBox=\"0 0 20 20\" width=\"12\" height=\"12\" fill=\"currentColor\" style=\"color:var(--cyan);\"><path fill-rule=\"evenodd\" d=\"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"/></svg>\n                    EXCLUSION VALIDATED (CORRECTLY AVOIDED)\n                </div>\n                <div class=\"gap-card-items\">\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('BAH')}</span><span class=\"gap-return negative\">&minus;11.90%</span><span class=\"gap-note\">DOGE devastation. Score &minus;5 exclusion saved significant losses.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('SAIC')}</span><span class=\"gap-return negative\">&minus;8.24%</span><span class=\"gap-note\">IT services targeted by DOGE. Score &minus;3 exclusion correct.</span></div>\n                    <div class=\"gap-item\"><span class=\"gap-ticker\">${tickerLink('PANW')}</span><span class=\"gap-return negative\">&minus;4.27%</span><span class=\"gap-note\">Platformization headwinds. Score &minus;1 exclusion validated.</span></div>\n                </div>\n            </div>\n            <div class=\"gap-analysis-card gap-insight\">\n                <div class=\"gap-card-label\">\n                    <svg viewBox=\"0 0 20 20\" width=\"12\" height=\"12\" fill=\"currentColor\" style=\"color:var(--amber);\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clip-rule=\"evenodd\"/></svg>\n                    KEY ADJUSTMENTS FOR NEXT PERIOD\n                </div>\n                <div class=\"gap-card-items\">\n                    <div class=\"gap-item gap-item-note\"><strong>BAESY underweighted:</strong> Scored 3, returned +16.29%. European NATO re-armament is a multi-year supercycle. Recommend boosting to score 4, increasing weight to ~6.8%.</div>\n                    <div class=\"gap-item gap-item-note\"><strong>LDOS miscategorized:</strong> Score 2 was too optimistic. DOGE risk to IT services contractors is systemic, not transient. Recommend reducing to score 0 or below.</div>\n                    <div class=\"gap-item gap-item-note\"><strong>Net alpha vs SPY: +4.37pp.</strong> Defense sector outperformed S&amp;P 500 significantly. Iran escalation + $839B budget are structural tailwinds. Strategy remains sound.</div>\n                </div>\n            </div>\n        `;\n    }\n\n    // Daily chart\n    renderTenDayChart();\n\n    // Legend\n    const legendEl = document.getElementById(\"tenDayChartLegend\");\n    if (legendEl) {\n        legendEl.innerHTML = `\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#22c55e;\"></div> PPLX_DEFENSE (+4.91%)</div>\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#06b6d4;\"></div> ITA (+5.18%)</div>\n            <div class=\"etf-legend-item\"><div class=\"etf-legend-dot\" style=\"background:#64748b;\"></div> SPY (+0.54%)</div>\n        `;\n    }\n}\n\nfunction renderTenDayChart() {\n    const canvas = document.getElementById(\"tenDayChart\");\n    if (!canvas) return;\n    const ctx = canvas.getContext(\"2d\");\n    const labels = [\"Feb 10\", \"Feb 11\", \"Feb 12\", \"Feb 13\", \"Feb 14\", \"Feb 18\", \"Feb 19\", \"Feb 20\", \"Feb 21\", \"Feb 23\"];\n    const etfData =  [100, 101.2, 102.1, 101.8, 102.9, 103.2, 103.8, 104.3, 104.9, 105.3];\n    const itaData =  [100, 100.9, 101.5, 101.2, 102.4, 102.8, 103.3, 103.8, 104.5, 104.8];\n    const spyData =  [100, 100.0, 100.3, 100.1, 100.5, 100.7, 100.5, 100.3, 100.1, 100.4];\n\n    new Chart(ctx, {\n        type: 'line',\n        data: {\n            labels,\n            datasets: [\n                {\n                    label: 'PPLX_DEFENSE',\n                    data: etfData,\n                    borderColor: '#22c55e',\n                    backgroundColor: 'rgba(34,197,94,0.06)',\n                    borderWidth: 2.5,\n                    fill: true,\n                    tension: 0.35,\n                    pointRadius: 3,\n                    pointBackgroundColor: '#22c55e',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 5\n                },\n                {\n                    label: 'ITA',\n                    data: itaData,\n                    borderColor: '#06b6d4',\n                    borderWidth: 2,\n                    borderDash: [6, 4],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 3,\n                    pointBackgroundColor: '#06b6d4',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 5\n                },\n                {\n                    label: 'SPY',\n                    data: spyData,\n                    borderColor: '#64748b',\n                    borderWidth: 2,\n                    borderDash: [3, 3],\n                    fill: false,\n                    tension: 0.35,\n                    pointRadius: 3,\n                    pointBackgroundColor: '#64748b',\n                    pointBorderColor: '#0a0e17',\n                    pointBorderWidth: 2,\n                    pointHoverRadius: 5\n                }\n            ]\n        },\n        options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            interaction: { intersect: false, mode: 'index' },\n            plugins: {\n                legend: { display: false },\n                tooltip: {\n                    backgroundColor: '#1a1f2e',\n                    borderColor: '#2d3a50',\n                    borderWidth: 1,\n                    titleFont: { family: \"'IBM Plex Mono'\", size: 11, weight: '600' },\n                    bodyFont: { family: \"'IBM Plex Mono'\", size: 12 },\n                    titleColor: '#94a3b8',\n                    bodyColor: '#e2e8f0',\n                    padding: 12,\n                    displayColors: true,\n                    boxWidth: 10,\n                    boxHeight: 3,\n                    callbacks: {\n                        label: function(context) {\n                            const val = context.parsed.y;\n                            const change = (val - 100).toFixed(1);\n                            const sign = change >= 0 ? '+' : '';\n                            return ` ${context.dataset.label}: ${sign}${change}%`;\n                        }\n                    }\n                }\n            },\n            scales: {\n                x: {\n                    ticks: { color: '#64748b', font: { family: \"'IBM Plex Mono'\", size: 10 } },\n                    grid: { color: 'rgba(30,41,59,0.5)', drawBorder: false }\n                },\n                y: {\n                    ticks: {\n                        color: '#64748b',\n                        font: { family: \"'IBM Plex Mono'\", size: 10 },\n                        callback: v => (v >= 100 ? '+' : '') + (v - 100).toFixed(1) + '%'\n                    },\n                    grid: { color: 'rgba(30,41,59,0.5)', drawBorder: false },\n                    suggestedMin: 99,\n                    suggestedMax: 106\n                }\n            }\n        }\n    });\n}\n\n// ============================================\n// RENDER BUYABLE BASKET SECTION\n// ============================================\nfunction renderBuyableBasket() {\n    const weightedHoldings = computeETFWeights(etfHoldings);\n    const tbody = document.getElementById(\"basketBody\");\n    if (!tbody) return;\n\n    const rationales = {\n        LMT: \"Record backlog, PAC-3 demand, Iran escalation, 6 congressional buys\",\n        RTX: \"$50B Patriot contract, most Congress-traded defense stock, Iran tailwind\",\n        NOC: \"B-21 validated, nuclear modernization, ICBM monopoly\",\n        KTOS: \"$1.1B Drone Dominance win, attritable UAS megatrend\",\n        RKLB: \"Golden Dome, $816M SDA contract, space-based tracking\",\n        BWXT: \"Sole-source naval nuclear, zero DOGE risk, submarine buildup\",\n        HII: \"Only nuclear shipyard, $151B SHIELD contract, +11.87% in 10-day\",\n        CW: \"Sole-source naval nuclear controls, zero DOGE risk, +9.99% in 10-day\",\n        GD: \"Virginia-class sub, congressional insider trade signal\",\n        LHX: \"EW/comms demand, Mullin buy signal, 1.5x book-to-bill\",\n        PLTR: \"$10B Army AI contract, DOGE-aligned, MTG buy signal\",\n        AVAV: \"Switchblade demand, +7.91% in 10-day, drone surge\",\n        BAESY: \"European NATO re-armament supercycle, +16.29% in 10-day\",\n        MRCY: \"Embedded in F-35/Patriot, CEO turnaround, +8.46% in 10-day\",\n        BA: \"F-47 NGAD win, mixed signal ‚Äî monitor commercial headwinds\",\n        LDOS: \"Navy NGEN anchor ‚Äî watch for DOGE risk deterioration\",\n        FTNT: \"OT/ICS security, small position for cyber hedge\",\n        CRWD: \"Persistent gov cyber demand, small allocation\",\n        JOBY: \"Military logistics optionality, minimal allocation\"\n    };\n\n    tbody.innerHTML = \"\";\n    const sorted = weightedHoldings.slice().sort((a, b) => b.score - a.score || b.weight - a.weight);\n    sorted.forEach((h, i) => {\n        const priceData = stockData.find(s => s.ticker === h.ticker);\n        const price = priceData ? priceData.price : 0;\n        const allocation = (h.weight * 10000).toFixed(0);\n        const shares = price > 0 ? (parseFloat(allocation) / price).toFixed(2) : '‚Äî';\n        const tr = document.createElement(\"tr\");\n        tr.innerHTML = `\n            <td style=\"text-align:center; color:var(--text-muted); font-weight:600;\">${i + 1}</td>\n            <td class=\"ticker-cell\">${tickerLink(h.ticker)}</td>\n            <td class=\"company-cell\">${h.company}</td>\n            <td class=\"score-cell\"><span class=\"score-badge bullish\">+${h.score}</span></td>\n            <td style=\"text-align:center; font-weight:700;\">${(h.weight * 100).toFixed(1)}%</td>\n            <td style=\"text-align:right; font-weight:700; color:var(--green); font-variant-numeric:tabular-nums;\">$${parseFloat(allocation).toLocaleString()}</td>\n            <td style=\"text-align:right; font-variant-numeric:tabular-nums; color:var(--text-secondary);\">${shares}</td>\n            <td class=\"summary-cell\" style=\"font-size:10px;\">${rationales[h.ticker] || ''}</td>\n        `;\n        tbody.appendChild(tr);\n    });\n\n    const instructionsEl = document.getElementById(\"basketInstructions\");\n    if (instructionsEl) {\n        instructionsEl.innerHTML = `\n            <div class=\"basket-inst-title\">EXECUTION INSTRUCTIONS</div>\n            <ul class=\"basket-inst-list\">\n                <li>To replicate this strategy, buy the following basket through any brokerage (<strong>Schwab, Fidelity, Interactive Brokers</strong>, etc.)</li>\n                <li>Fractional shares available at most brokerages ‚Äî exact weights achievable with as little as $1,000</li>\n                <li>Rebalance when composite signal score changes by <strong>&ge;2 points</strong> or when new intelligence triggers</li>\n                <li>Consider <strong>${tickerLink('ITA')}</strong> (iShares Aerospace &amp; Defense ETF) as a simpler single-ticker alternative &mdash; 10-day return: +5.18%</li>\n            </ul>\n            <div class=\"basket-disclaimer\">Share counts based on Feb 23 closing prices. <strong>Not financial advice. For research purposes only.</strong></div>\n        `;\n    }\n}\n\n// ============================================\n// RENDER POLITICIANS\n// ============================================\nfunction renderPoliticians() {\n    const container = document.getElementById(\"politicianCards\");\n    if (!container) return;\n    container.innerHTML = \"\";\n\n    politicianData.forEach((pol, i) => {\n        const card = document.createElement(\"div\");\n        card.className = \"pol-card\";\n        card.style.animationDelay = `${i * 0.05}s`;\n\n        card.innerHTML = `\n            <div class=\"pol-card-header\">\n                <div>\n                    <div class=\"pol-name\">${pol.name}</div>\n                    <div class=\"pol-party\">${pol.party}</div>\n                </div>\n                <span class=\"suspicion-badge ${pol.suspicionClass}\">${pol.suspicion}</span>\n            </div>\n            <div class=\"pol-committee\">\n                <span class=\"committee-dot ${pol.conflictLevel}\"></span>\n                ${pol.committee}\n            </div>\n            <div class=\"pol-summary\">${linkifyTickers(pol.summary)}</div>\n        `;\n        container.appendChild(card);\n    });\n}\n\n// ============================================\n// FILTERS & SORTING\n// ============================================\nfunction setupFilters() {\n    const filterEl = document.getElementById(\"signalFilter\");\n    const sortEl = document.getElementById(\"signalSort\");\n    const searchEl = document.getElementById(\"tickerSearch\");\n    if (!filterEl || !sortEl || !searchEl) return;\n\n    function applyFiltersAndSort() {\n        let filtered = [...stockData];\n        const filterVal = filterEl.value;\n        if (filterVal === \"bullish\") filtered = filtered.filter(s => s.direction === \"bullish\");\n        else if (filterVal === \"bearish\") filtered = filtered.filter(s => s.direction === \"bearish\");\n        else if (filterVal === \"neutral\") filtered = filtered.filter(s => s.direction === \"neutral\");\n\n        const search = searchEl.value.trim().toUpperCase();\n        if (search) {\n            filtered = filtered.filter(s =>\n                s.ticker.includes(search) || s.company.toUpperCase().includes(search)\n            );\n        }\n\n        const sortVal = sortEl.value;\n        switch (sortVal) {\n            case \"score-desc\": filtered.sort((a, b) => b.score - a.score); break;\n            case \"score-asc\": filtered.sort((a, b) => a.score - b.score); break;\n            case \"ticker\": filtered.sort((a, b) => a.ticker.localeCompare(b.ticker)); break;\n            case \"price-desc\": filtered.sort((a, b) => b.price - a.price); break;\n            case \"price-asc\": filtered.sort((a, b) => a.price - b.price); break;\n        }\n        renderMatrix(filtered);\n    }\n\n    filterEl.addEventListener(\"change\", applyFiltersAndSort);\n    sortEl.addEventListener(\"change\", applyFiltersAndSort);\n    searchEl.addEventListener(\"input\", applyFiltersAndSort);\n}\n\n// ============================================\n// METHODOLOGY TOGGLE\n// ============================================\nfunction setupMethodologyToggle() {\n    const toggle = document.getElementById(\"methodologyToggle\");\n    const content = document.getElementById(\"methodologyContent\");\n    const icon = document.getElementById(\"toggleIcon\");\n    if (!toggle || !content || !icon) return;\n\n    toggle.addEventListener(\"click\", () => {\n        content.classList.toggle(\"open\");\n        icon.classList.toggle(\"open\");\n    });\n}